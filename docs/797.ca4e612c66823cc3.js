"use strict";(self.webpackChunkcogniludos=self.webpackChunkcogniludos||[]).push([[797],{4797:(y,m,a)=>{a.r(m),a.d(m,{StatsModule:()=>R});var l=a(9808),u=a(3868),d=a(9560),n=a(1402),h=a(8045),o=a(3075),t=a(5e3),f=a(3038),g=a(3251),p=a(4107),S=a(508);const A=["lineChart"],v=["radarChart"],b=["frequencyChart"],x=["scatterChart"];function C(r,c){if(1&r&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&r){const s=c.$implicit;t.Q6J("value",s.value),t.xp6(1),t.hij(" ",s.viewValue," ")}}const k=[{path:"",component:(()=>{class r{constructor(s){this.scoreService=s,this.mmData=[],this.smData=[],this.oooData=[],this.cmData=[],this.sqData=[],this.coData=[],this.cbData=[],this.gameFormControl=new o.NI(""),this.defaultValue="mm",this.games=[{value:"mm",viewValue:"Mem\xf3ria M\xe1trix"},{value:"sm",viewValue:"Gyors P\xe1ros\xedt\xe1s"},{value:"ooo",viewValue:"Kakukktoj\xe1s"},{value:"cm",viewValue:"Sz\xedn P\xe1ros\xedt\xe1s"},{value:"sq",viewValue:"Sorozat"},{value:"co",viewValue:"Folytonoss\xe1g"},{value:"cb",viewValue:"Kr\xe9tat\xe1bla"}],this.ratingChartOptionDefault={title:{text:"J\xe1t\xe9k \xc9rt\xe9kel\xe9si Pontsz\xe1m"},xAxis:{type:"value"},yAxis:{type:"category",data:["Mem\xf3ria M\xe1trix","Gyors P\xe1ros\xedt\xe1s","Kakukktoj\xe1s","Sz\xedn P\xe1ros\xedt\xe1s","Sorozat","Folytonoss\xe1g","Kr\xe9tat\xe1bla"]},grid:{containLabel:!0},series:[{data:[0,0,0,0,0,0,0],type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.3)"}}]},this.radarOptionDefault={title:{text:"J\xe1t\xe9k \xc9rt\xe9kel\xe9si Pontsz\xe1m"},radar:{indicator:[{name:"Mem\xf3ria M\xe1trix",max:100},{name:"Gyors P\xe1ros\xedt\xe1s",max:100},{name:"Kakukktoj\xe1s",max:100},{name:"Sz\xedn P\xe1ros\xedt\xe1s",max:100},{name:"Sorozat",max:100},{name:"Folytonoss\xe1g",max:100},{name:"Kr\xe9tat\xe1bla",max:100}]},series:[{type:"radar",data:[{value:[0,0,0,0,0,0]}]}]},this.frequencyChartOptionDefault={title:{text:"Lej\xe1tszott j\xe1t\xe9kok"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0},xAxis:[{type:"category",data:["Mem\xf3ria\nM\xe1trix","Gyors\nP\xe1ros\xedt\xe1s","Kakukktoj\xe1s","Sz\xedn\nP\xe1ros\xedt\xe1s","Sorozat","Folytonoss\xe1g","Kr\xe9tat\xe1bla"],axisTick:{alignWithLabel:!0},axisLabel:{interval:0}}],yAxis:[{type:"value"}],series:[{name:"Direct",type:"bar",barWidth:"60%",data:[0,0,0,0,0,0,0]}]},this.scatterChartOptionDefault={title:{text:"Fejl\u0151d\xe9s"},xAxis:{},yAxis:{},series:[{symbolSize:20,data:[0,0],type:"scatter",itemStyle:{color:"rgba(255, 193, 7, 0.5)",borderColor:"#000"}}]}}ngOnInit(){this.currentUser=JSON.parse(localStorage.getItem("user")),this.scoreService.getAllScores(this.currentUser.email,"mm").then(s=>{this.scoreArray=s.docs,this.scoreSumm=0;for(let e=0;e<this.scoreArray.length;e++)this.scoreSumm+=this.scoreArray[e].data().score,this.mmData.push([new Date(this.scoreArray[e].data().date),this.scoreArray[e].data().score]);this.mmPlayed=this.scoreArray.length,this.mmAvarage=this.scoreSumm/this.scoreArray.length}),this.scoreService.getAllScores(this.currentUser.email,"sm").then(s=>{this.scoreArray=s.docs,this.scoreSumm=0;for(let e=0;e<this.scoreArray.length;e++)this.smData.push([new Date(this.scoreArray[e].data().date),this.scoreArray[e].data().score]),this.scoreSumm+=this.scoreArray[e].data().score;this.smPlayed=this.scoreArray.length,this.smAvarage=this.scoreSumm/this.scoreArray.length}),this.scoreService.getAllScores(this.currentUser.email,"ooo").then(s=>{this.scoreArray=s.docs,this.scoreSumm=0;for(let e=0;e<this.scoreArray.length;e++)this.oooData.push([new Date(this.scoreArray[e].data().date),this.scoreArray[e].data().score]),this.scoreSumm+=this.scoreArray[e].data().score;this.oooPlayed=this.scoreArray.length,this.oooAvarage=this.scoreSumm/this.scoreArray.length}),this.scoreService.getAllScores(this.currentUser.email,"cm").then(s=>{this.scoreArray=s.docs,this.scoreSumm=0;for(let e=0;e<this.scoreArray.length;e++)this.cmData.push([new Date(this.scoreArray[e].data().date),this.scoreArray[e].data().score]),this.scoreSumm+=this.scoreArray[e].data().score;this.cmPlayed=this.scoreArray.length,this.cmAvarage=this.scoreSumm/this.scoreArray.length}),this.scoreService.getAllScores(this.currentUser.email,"sq").then(s=>{this.scoreArray=s.docs,this.scoreSumm=0;for(let e=0;e<this.scoreArray.length;e++)this.sqData.push([new Date(this.scoreArray[e].data().date),this.scoreArray[e].data().score]),this.scoreSumm+=this.scoreArray[e].data().score;this.sqPlayed=this.scoreArray.length,this.sqAvarage=this.scoreSumm/this.scoreArray.length}),this.scoreService.getAllScores(this.currentUser.email,"co").then(s=>{this.scoreArray=s.docs,this.scoreSumm=0;for(let e=0;e<this.scoreArray.length;e++)this.coData.push([new Date(this.scoreArray[e].data().date),this.scoreArray[e].data().score]),this.scoreSumm+=this.scoreArray[e].data().score;this.coPlayed=this.scoreArray.length,this.coAvarage=this.scoreSumm/this.scoreArray.length}),this.scoreService.getAllScores(this.currentUser.email,"cb").then(s=>{this.scoreArray=s.docs,this.scoreSumm=0;for(let e=0;e<this.scoreArray.length;e++)this.cbData.push([new Date(this.scoreArray[e].data().date),this.scoreArray[e].data().score]),this.scoreSumm+=this.scoreArray[e].data().score;this.cbPlayed=this.scoreArray.length,this.cbAvarage=this.scoreSumm/this.scoreArray.length}),this.scoreService.getBestScore("mm").then(s=>{this.mmBest=s.docs[0].data().score}),this.scoreService.getBestScore("sm").then(s=>{this.smBest=s.docs[0].data().score}),this.scoreService.getBestScore("ooo").then(s=>{this.oooBest=s.docs[0].data().score}),this.scoreService.getBestScore("cm").then(s=>{this.cmBest=s.docs[0].data().score}),this.scoreService.getBestScore("sq").then(s=>{this.sqBest=s.docs[0].data().score}),this.scoreService.getBestScore("co").then(s=>{this.coBest=s.docs[0].data().score}),this.scoreService.getBestScore("cb").then(s=>{this.cbBest=s.docs[0].data().score})}ngAfterViewInit(){this.lineChart=h.init(this.lineChartRef.nativeElement),this.radarChart=h.init(this.radarChartRef.nativeElement),this.frequencyChart=h.init(this.frequencyChartRef.nativeElement),this.scatterChart=h.init(this.scatterChartRef.nativeElement),setTimeout(()=>{this.refreshDevelopment(),this.refreshFrequency(),this.refreshRating()},1e3)}refreshRating(){this.mmRating=this.mmAvarage/this.mmBest*100,this.smRating=this.smAvarage/this.smBest*100,this.oooRating=this.oooAvarage/this.oooBest*100,this.cmRating=this.cmAvarage/this.cmBest*100,this.sqRating=this.sqAvarage/this.sqBest*100,this.coRating=this.coAvarage/this.coBest*100,this.cbRating=this.cbAvarage/this.cbBest*100,this.lineChart.setOption({title:{text:"J\xe1t\xe9k \xc9rt\xe9kel\xe9si Pontsz\xe1m"},xAxis:{type:"value"},yAxis:{type:"category",data:["Mem\xf3ria M\xe1trix","Gyors P\xe1ros\xedt\xe1s","Kakukktoj\xe1s","Sz\xedn P\xe1ros\xedt\xe1s","Sorozat","Folytonoss\xe1g","Kr\xe9tat\xe1bla"]},grid:{containLabel:!0},series:[{data:[this.mmRating,this.smRating,this.oooRating,this.cmRating,this.sqRating,this.coRating,this.cbRating],type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.4)"},itemStyle:{color:"rgb(255, 193, 7)",borderWidth:1,borderColor:"#000"}}]}),this.radarChart.setOption({title:{text:"J\xe1t\xe9k \xc9rt\xe9kel\xe9si Pontsz\xe1m"},radar:{indicator:[{name:"Mem\xf3ria M\xe1trix",max:100},{name:"Gyors P\xe1ros\xedt\xe1s",max:100},{name:"Kakukktoj\xe1s",max:100},{name:"Sz\xedn P\xe1ros\xedt\xe1s",max:100},{name:"Sorozat",max:100},{name:"Folytonoss\xe1g",max:100},{name:"Kr\xe9tat\xe1bla",max:100}]},series:[{type:"radar",data:[{value:[this.mmRating,this.smRating,this.oooRating,this.cmRating,this.sqRating,this.coRating,this.cbRating],areaStyle:{color:"rgba(255, 193, 7, 1)"}}],itemStyle:{color:"black"}}]})}refreshFrequency(){this.frequencyChart.setOption({title:{text:"Lej\xe1tszott j\xe1t\xe9kok"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!0},xAxis:[{type:"category",data:["Mem\xf3ria\nM\xe1trix","Gyors\nP\xe1ros\xedt\xe1s","Kakukktoj\xe1s","Sz\xedn\nP\xe1ros\xedt\xe1s","Sorozat","Folytonoss\xe1g","Kr\xe9tat\xe1bla"],axisTick:{alignWithLabel:!0},axisLabel:{interval:0}}],yAxis:[{type:"value"}],series:[{name:"Direct",type:"bar",barWidth:"60%",data:[this.mmPlayed,this.smPlayed,this.oooPlayed,this.cmPlayed,this.sqPlayed,this.coPlayed,this.cbPlayed],itemStyle:{color:"rgb(255, 193, 7)",borderWidth:1,borderColor:"#000"}}]})}refreshDevelopment(){let s;switch(this.gameFormControl.value){case"cb":s=this.cbData;break;case"cm":s=this.cmData;break;case"co":s=this.coData;break;case"mm":s=this.mmData;break;case"ooo":s=this.oooData;break;case"sq":s=this.sqData;break;case"sm":s=this.smData}this.scatterChart.setOption({title:{text:"Fejl\u0151d\xe9s"},xAxis:[{type:"time",boundaryGap:!1}],yAxis:{},series:[{symbolSize:20,data:s,type:"scatter",itemStyle:{color:"rgba(255, 193, 7, 0.5)",borderColor:"#000"}}]})}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(f.Y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-stats"]],viewQuery:function(s,e){if(1&s&&(t.Gf(A,5),t.Gf(v,5),t.Gf(b,5),t.Gf(x,5)),2&s){let i;t.iGM(i=t.CRH())&&(e.lineChartRef=i.first),t.iGM(i=t.CRH())&&(e.radarChartRef=i.first),t.iGM(i=t.CRH())&&(e.frequencyChartRef=i.first),t.iGM(i=t.CRH())&&(e.scatterChartRef=i.first)}},decls:22,vars:7,consts:[["mat-align-tabs","center"],["label","\xc9rt\xe9kel\xe9sek"],[3,"click"],["echarts","",1,"chart",3,"options"],["lineChart",""],["radarChart",""],["label","Lej\xe1tszott menetek"],["frequencyChart",""],["label","Fejl\u0151d\xe9s"],[1,"controls"],["matInput","",3,"ngModel","formControl","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["scatterChart",""],[3,"value"]],template:function(s,e){1&s&&(t.TgZ(0,"body")(1,"mat-tab-group",0)(2,"mat-tab",1)(3,"button",2),t.NdJ("click",function(){return e.refreshRating()}),t._uU(4,"Adatok friss\xedt\xe9se"),t.qZA(),t._UZ(5,"div",3,4)(7,"div",3,5),t.qZA(),t.TgZ(9,"mat-tab",6)(10,"button",2),t.NdJ("click",function(){return e.refreshFrequency()}),t._uU(11,"Adatok friss\xedt\xe9se"),t.qZA(),t._UZ(12,"div",3,7),t.qZA(),t.TgZ(14,"mat-tab",8)(15,"div",9)(16,"mat-select",10),t.NdJ("ngModelChange",function(P){return e.defaultValue=P}),t.YNc(17,C,2,2,"mat-option",11),t.qZA(),t.TgZ(18,"button",2),t.NdJ("click",function(){return e.refreshDevelopment()}),t._uU(19,"Adatok friss\xedt\xe9se"),t.qZA()(),t._UZ(20,"div",3,12),t.qZA()()()),2&s&&(t.xp6(5),t.Q6J("options",e.ratingChartOptionDefault),t.xp6(2),t.Q6J("options",e.radarOptionDefault),t.xp6(5),t.Q6J("options",e.frequencyChartOptionDefault),t.xp6(4),t.Q6J("ngModel",e.defaultValue)("formControl",e.gameFormControl),t.xp6(1),t.Q6J("ngForOf",e.games),t.xp6(3),t.Q6J("options",e.scatterChartOptionDefault))},directives:[g.SP,g.uX,d._w,p.gD,o.JJ,o.oH,l.sg,S.ey],styles:["body[_ngcontent-%COMP%]{min-height:calc(100vh - 104px);height:-moz-fit-content;height:fit-content;max-width:100%;background-color:#101010;text-align:center;padding:15px 0}mat-tab-group[_ngcontent-%COMP%]{margin:25px auto;width:60vw;min-height:80vh;background-color:#e6e6e6;border-radius:32px}button[_ngcontent-%COMP%]{padding:5px;cursor:pointer;font-weight:700;background-color:#ffc107;color:#000;border:2px solid #2a2a2a;border-radius:4px;text-align:center;text-decoration:none;display:inline-block;transition-duration:.4s;margin:20px auto auto}.chart[_ngcontent-%COMP%]{width:90%;margin:20px auto;padding:20px;background-color:#fff;color:#000;border:1px solid black;border-radius:16px}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:auto}mat-select[_ngcontent-%COMP%]{width:200px;margin:20px auto auto;padding:5px;font-weight:700;background-color:#ffc107;color:#000;border:2px solid black;border-radius:8px}"]}),r})()}];let D=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[n.Bz.forChild(k)],n.Bz]}),r})(),R=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[l.ez,o.UX,D,u.q,d.Ns.forRoot({echarts:()=>Promise.resolve().then(a.bind(a,8045))})]]}),r})()},3038:(y,m,a)=>{a.d(m,{Y:()=>d});var l=a(5e3),u=a(6185);let d=(()=>{class n{constructor(o){this.afs=o,this.dbPath="scores",this.scoresRef=o.collection(this.dbPath)}get(o){return this.scoresRef.doc(o).get()}getAll(){return this.scoresRef}getUserScores(o,t){return this.scoresRef.ref.where("userEmail","==",o).where("game","==",t).orderBy("score","desc").orderBy("date").limit(10).get()}getAllScores(o,t){return this.scoresRef.ref.where("userEmail","==",o).where("game","==",t).get()}getBestScore(o){return this.scoresRef.ref.where("game","==",o).orderBy("score","desc").limit(1).get()}create(o){return this.scoresRef.add(Object.assign({},o))}}return n.\u0275fac=function(o){return new(o||n)(l.LFG(u.ST))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);